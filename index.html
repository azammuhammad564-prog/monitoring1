<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Monitoring Sensor Raspberry</title>
<style>
    body {
        font-family: Arial;
        background: #f5f5f5;
        text-align: center;
        padding: 20px;
    }
    .box {
        background: white;
        padding: 15px;
        margin: 10px;
        border-radius: 10px;
        font-size: 22px;
        box-shadow: 0 0 10px #ccc;
    }
    .alarm {
        color: red;
        font-size: 28px;
        font-weight: bold;
    }
</style>
</head>
<body>

<h1>Monitoring Sensor Raspberry Pi</h1>

<div class="box" id="fireBox">ðŸ”¥ Flame: -</div>
<div class="box" id="vibBox">ðŸ“³ Vibration: -</div>
<div class="box" id="door1Box">ðŸšª Pintu 1: -</div>
<div class="box" id="door2Box">ðŸšª Pintu 2: -</div>
<div class="box alarm" id="alarmBox">Status Alarm: -</div>

<script>
async function updateSensor() {
    try {
        let r = await fetch("http://10.72.2.216:5000/sensor");
        let data = await r.json();

        document.getElementById("fireBox").innerText =
            "ðŸ”¥ Flame: " + (data.fire === 0 ? "Api Terdeteksi!" : "Aman");

        document.getElementById("vibBox").innerText =
            "ðŸ“³ Vibration: " + (data.vibration === 0 ? "Getaran!" : "Aman");

        document.getElementById("door1Box").innerText =
            "ðŸšª Pintu 1: " + (data.door1 === 1 ? "Terbuka" : "Tertutup");

        document.getElementById("door2Box").innerText =
            "ðŸšª Pintu 2: " + (data.door2 === 1 ? "Terbuka" : "Tertutup");

        document.getElementById("alarmBox").innerText =
            "Status Alarm: " + (data.alarm ? "MENYALA ðŸš¨" : "Mati");

        document.getElementById("alarmBox").style.color =
            data.alarm ? "red" : "green";

    } catch (e) {
        console.log("Error:", e);
    }
}

setInterval(updateSensor, 500);
</script>

</body>
</html>
